package com.example.spinnerlistapp;

import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.SeekBar;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {

    Spinner spinner;
    ListView listView, resultListView;
    SeekBar seekBar;
    TextView seekValue, minValue, maxValue;
    CheckBox checkBox;
    RadioGroup radioGroup;
    Button addButton;

    String[] planets = {"Merkury", "Ziemia", "Wenus", "Mars", "Jowisz", "Saturn", "Uran", "Neptun"};
    String[] dwarfPlanets = {"Pluton", "Ceres", "Makemake", "Haumea", "Eris"};

    ArrayList<String> resultItems;
    ArrayAdapter<String> resultAdapter;

    final String[] selectedPlanet = new String[1]; // przechowuje wybraną nazwę

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Znajdowanie widoków
        spinner = findViewById(R.id.planets_spinner);
        listView = findViewById(R.id.planets_listview);
        resultListView = findViewById(R.id.result_listview);
        seekBar = findViewById(R.id.seekBar);
        seekValue = findViewById(R.id.seekValue);
        minValue = findViewById(R.id.minValue);
        maxValue = findViewById(R.id.maxValue);
        checkBox = findViewById(R.id.checkBox);
        radioGroup = findViewById(R.id.radioGroup);
        addButton = findViewById(R.id.add_button);

        // SeekBar
        seekBar.setMax(100);
        minValue.setText("0");
        maxValue.setText("100");
        seekValue.setText(String.valueOf(seekBar.getProgress()));

        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar sb, int progress, boolean fromUser) {
                seekValue.setText(String.valueOf(progress));
            }
            @Override
            public void onStartTrackingTouch(SeekBar sb) {}
            @Override
            public void onStopTrackingTouch(SeekBar sb) {}
        });

        // Spinner
        ArrayAdapter<CharSequence> spinnerAdapter = ArrayAdapter.createFromResource(this,
                R.array.planets_array, android.R.layout.simple_spinner_item);
        spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(spinnerAdapter);

        // Wynikowa ListView
        resultItems = new ArrayList<>();
        resultAdapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, resultItems);
        resultListView.setAdapter(resultAdapter);

        // Pierwszy ListView
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, planets));
        listView.setOnItemClickListener((parent, view, position, id) ->
                selectedPlanet[0] = parent.getItemAtPosition(position).toString()
        );

        // Spinner wybiera listę planet
        spinner.setOnItemSelectedListener(new android.widget.AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(android.widget.AdapterView<?> parent, View view, int position, long id) {
                String[] lista = position == 0 ? planets : dwarfPlanets;
                listView.setAdapter(new ArrayAdapter<>(MainActivity.this, android.R.layout.simple_list_item_1, lista));
            }

            @Override
            public void onNothingSelected(android.widget.AdapterView<?> parent) {}
        });

        // Button dodawania
        addButton.setOnClickListener(v -> {
            if (selectedPlanet[0] != null) {
                int radioId = radioGroup.getCheckedRadioButtonId();
                String radioText = radioId != -1 ? ((RadioButton)findViewById(radioId)).getText().toString() : "";
                String item = "Planeta: " + selectedPlanet[0] +
                        ", Seek:" + seekBar.getProgress() +
                        ", Check:" + checkBox.isChecked() +
                        ", Radio:" + radioText;

                resultItems.add(item);
                resultAdapter.notifyDataSetChanged();
                Toast.makeText(MainActivity.this, "Dodano: " + item, Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(MainActivity.this, "Nie wybrano planety", Toast.LENGTH_SHORT).show();
            }
        });
    }
}
